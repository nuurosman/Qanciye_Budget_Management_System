<!DOCTYPE html>
<html lang="en">

<head>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Qanciye Construction And General Services Com</title>
  <meta content="width=device-width, initial-scale=1.0, shrink-to-fit=no" name="viewport" />

  <!-- Favicon -->
<link rel="icon" href="{{ url_for('static', filename='images/qanciye.png') }}" type="image/x-icon" />

    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"> -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css">
 
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css">

  <!-- External Fonts and Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
  


  <!-- Web Font Loader -->
  <script src="{{ url_for('static', filename='js/plugin/webfont/webfont.min.js') }}"></script>
  <script>
    WebFont.load({
      google: { families: ["Public Sans:300,400,500,600,700"] },
      custom: {
        families: [
          "Font Awesome 5 Solid",
          "Font Awesome 5 Regular",
          "Font Awesome 5 Brands",
          "simple-line-icons",
        ],
        urls: ["{{ url_for('static', filename='css/fonts.min.css') }}"],
      },
      active: function () {
        sessionStorage.fonts = true;
      },
    });
  </script>

  <!-- CSS Files -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/plugins.min.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/kaiadmin.min.css') }}" />

  <!-- Demo CSS (for development only, not for production) -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/demo.css') }}" />
</head>

<body>

  <div class="wrapper">
    <!-- Sidebar -->
    <div class="sidebar" data-background-color="dark">
      <div class="sidebar-logo">
        <!-- Logo Header -->
        <div class="logo-header" data-background-color="dark">
          <a href="{{url_for('dashboard')}}" class="logo">
            <img src="{{ url_for('static', filename='images/Qanciye white.png') }}" alt="Logo"
                style="width: 100px; height: 60px; margin-left: 45px;" class="mt-2 pb-1">
          </a>
          <div class="nav-toggle">
            <button class="btn btn-toggle toggle-sidebar">
              <i class="gg-menu-right"></i>
            </button>
            <button class="btn btn-toggle sidenav-toggler">
              <i class="gg-menu-left"></i>
            </button>
          </div>
          <button class="topbar-toggler more">
            <i class="gg-more-vertical-alt"></i>
          </button>
        </div>
        <!-- End Logo Header -->
      </div>
      <div class="sidebar-wrapper scrollbar scrollbar-inner">
        <div class="sidebar-content">
          <ul class="nav nav-secondary">
            <li class="nav-item active">
              
              
                <a href="{{url_for('dashboard')}}">
                  <i class="bi bi-house-door-fill"></i>
                  <span class="sub-item">Dashboard</span>
                </a>
      
            </li>
            <li class="nav-section">
              <span class="sidebar-mini-icon">
                <i class="fa fa-ellipsis-h"></i>
              </span>
              <h4 class="text-section">Components</h4>
            </li>
            {% if session['user']['user_type'] == 'admin' %}
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#managesite">
                <i class="bx bx-group"></i>
                <p>Manage User</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="managesite">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('adminManage')}}">
                      <i class="bi bi-person-gear"></i>
                      <span class="sub-item">Manage admins</span>
                    </a>
                  </li>
                  <li>
                    <a href="{{url_for('site_engineerManage')}}">
                      <i class="bi bi-person-badge"></i>
                      <span class="sub-item">Manage Site engineer</span>
                    </a>
                  </li>
            
                  <li>
                    <a href="{{url_for('labour_Manage')}}">
                      <i class="bi bi-person-workspace"></i>
                      <span class="sub-item">Manage labour</span>
                    </a>
                  </li>

                </ul>
              </div>
            </li>


            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#materials">
                <i class="bi bi-kanban"></i>
                <p>Manage Projects</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="materials">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('project_manage')}}">
                      <span class="sub-item">Projects</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>

                     <li class="nav-item">
              <a data-bs-toggle="collapse" href="#transaction">
                <i class="bi bi-clipboard-check"></i>
                <p>Assign Work to Labour</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="transaction">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('manage_labour_project')}}">
                      <span class="sub-item">Assigne Labour Project</span>
                    </a>
                  </li>
         
          
                </ul>
              </div>
            </li>


                 <li class="nav-item">
              <a data-bs-toggle="collapse" href="#ManageAttendance">
                <i class="bi bi-clock"></i>
                <!-- <i class="bi bi-calendar-check"></i> -->
                <p>Manage Attendance</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="ManageAttendance">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('manage_attendance')}}">
                      <span class="sub-item">Attendance</span>
                    </a>
                  </li>
          
                </ul>
              </div>
            </li>

            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#employees">
                <i class="bi bi-bricks"></i>
                <p>Manage Materials</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="employees">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('manageMmaterials')}}">
                      <span class="sub-item">Materials</span>
                    </a>
                  </li>
           
                </ul>
              </div>
            </li>
             
     
   
       
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#wages">
                <i class="bi bi-cash-coin"></i>
                <p>Manage Wages</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="wages">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('manage_wages')}}">
                      <span class="sub-item">Wages</span>
                    </a>
                  </li>
          
                </ul>
              </div>
            </li>
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#expenses">
                <i class='bx bx-money '></i>
                <p>Manage Expenses</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="expenses">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('manage_expenses')}}">
                      <span class="sub-item">Expenses</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>

             <li class="nav-item">
              <a data-bs-toggle="collapse" href="#payment">
             <i class="bi bi-currency-dollar"></i>
              <!-- <i class="bi bi-paypal"></i> -->
                <p>Manage Payment</p>
                <span class="caret"></span>
              </a>

              <div class="collapse" id="payment">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('manage_payments')}}">
                      <span class="sub-item">Pay Now</span>
                    </a>
                  </li>
            
                </ul>
              </div>
            </li>
      
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#track_budget">
                <i class="bi bi-wallet2"></i>
                <p>Manage Budget Tracking</p>
                <span class="caret"></span>
              </a>

              <div class="collapse" id="track_budget">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('manage_budget_transactions')}}">
                      <span class="sub-item">Budget Tracking</span>
                    </a>
                  </li>
     
                </ul>
              </div>
            </li>

                     

                      <li class="nav-item">
              <a data-bs-toggle="collapse" href="#report">
               <i class="bi bi-graph-up"></i>
                <p>Reports</p>
                <span class="caret"></span>
              </a>

              <div class="collapse" id="report">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('admin_reports')}}">
                      <span class="sub-item">Report</span>
                    </a>
                  </li>
     
                </ul>
              </div>
            </li>
        
            {% endif %}
            {% if session['user']['user_type'] == 'site_engineer' %}
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#site_engineer">
                <i class="bi bi-person-workspace"></i>
                <p>Manage Projects</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="site_engineer">
                <ul class="nav nav-collapse">
                  <li>
                      <a href="{{url_for('view_my_projects')}}">
                        <span class="sub-item">Projects</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
             <li class="nav-item">
              <a data-bs-toggle="collapse" href="#site_engineer_assignedLabour">
            <i class='bx bx-hard-hat '></i>
             <!-- <i class="bi bi-people-fill"></i> -->
                <p>Manage Assigned Labour</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="site_engineer_assignedLabour">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('site_engineer_assigned_labour')}}">
                      <span class="sub-item">Assigned Labour</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#labour_attendance">
                <i class="bi bi-clock"></i>
                <p>Manage labour attendance</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="labour_attendance">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('site_engineer_labour_attendance')}}">
                      <span class="sub-item">Labour attendance</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
             <li class="nav-item">
              <a data-bs-toggle="collapse" href="#wages">
                <i class="bi bi-cash-coin"></i>
                <p>Manage Wages</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="wages">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('site_engineer_manage_wages')}}">
                      <span class="sub-item">Wages</span>
                    </a>
                  </li>
          
                </ul>
              </div>
            </li>
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#employees">
                <i class="bi bi-bricks"></i>
                <p>Manage Materials</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="employees">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{ url_for('Site_engineer_materials') }}">
                      <span class="sub-item">Materials</span>
                    </a>
                  </li>
           
                </ul>
              </div>
            </li>
             
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#expenses">
             <i class='bx bx-money '></i>
                <p>Manage Expenses</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="expenses">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('site_engineer_expenses')}}">
                      <span class="sub-item">Expenses</span>
                    </a>
                  </li>
                </ul>
              </div>
            </li>
           
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#reports">
                <i class="bi bi-graph-up-arrow"></i>
                <p>Manage Report</p>
                <span class="caret"></span>
              </a>

              <div class="collapse" id="reports">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('financial_report')}}">
                      <span class="sub-item">Project Report</span>
                    </a>
                  </li>
                
                </ul>
              </div>
            </li>
            <li class="nav-item">
              <a  href="{{url_for('site_engineer_logout')}}">
              <i class="bi bi-box-arrow-right fs-2"></i>
              <strong class="fs-4">Logout</strong></a>
          
              </a>

        
            </li>
            {% endif %}
            {% if session['user']['user_type'] == 'labour' %}
            <li class="nav-item">
              <a data-bs-toggle="collapse" href="#labour">
                <i class="bi bi-person-workspace"></i>
                <p>My Projects</p>
                <span class="caret"></span>
              </a>
              <div class="collapse" id="labour">
                <ul class="nav nav-collapse">
                  <li>
                    <a href="{{url_for('Labour_my_projects')}}">
                      <span class="sub-item">Projects</span>
                    </a>
                  </li>
                </ul>
              </div>
                         <li class="nav-item">
              <a  href="{{url_for('labour_logout')}}">
              <i class="bi bi-box-arrow-right fs-2"></i>
              <strong class="fs-4">Logout</strong></a>
          
              </a>

        
            </li>
              {% endif %}
          </ul>
        </div>
      </div>
    </div>
    <!-- End Sidebar -->
<!-- style="overflow-y: hidden;" -->
    <div class="main-panel" >
      <div class="main-header">
        <div class="main-header-logo">
          <!-- Logo Header -->
          <div class="logo-header" data-background-color="dark">
            <a href="index.html" class="logo">
              <img src="assets/img/kaiadmin/logo_light.svg" alt="navbar brand" class="navbar-brand" height="20" />
            </a>
            <div class="nav-toggle">
              <button class="btn btn-toggle toggle-sidebar">
                <i class="gg-menu-right"></i>
              </button>
              <button class="btn btn-toggle sidenav-toggler">
                <i class="gg-menu-left"></i>
              </button>
            </div>
            <button class="topbar-toggler more">
              <i class="gg-more-vertical-alt"></i>
            </button>
          </div>
          <!-- End Logo Header -->
        </div>
        <!-- Navbar Header -->
        <nav class="navbar navbar-header navbar-header-transparent navbar-expand-lg border-bottom">
          <div class="container-fluid">


            <ul class="navbar-nav topbar-nav ms-md-auto align-items-center">
              <li class="nav-item topbar-icon dropdown hidden-caret d-flex d-lg-none">
                <a class="nav-link dropdown-toggle" data-bs-toggle="dropdown" href="#" role="button"
                  aria-expanded="false" aria-haspopup="true">
                  <i class="fa fa-search"></i>
                </a>
                <ul class="dropdown-menu dropdown-search animated fadeIn">
                  <form class="navbar-left navbar-form nav-search">
                    <div class="input-group">
                      <input type="text" placeholder="Search ..." class="form-control" />
                    </div>
                  </form>
                </ul>
              </li>
              <li class="nav-item topbar-icon dropdown hidden-caret">
                <a class="nav-link dropdown-toggle" href="#" id="messageDropdown" role="button"
                  data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <i class="bi bi-envelope"></i>

                </a>
                <ul class="dropdown-menu messages-notif-box animated fadeIn" aria-labelledby="messageDropdown">
                  <li>
                    <div class="dropdown-title d-flex justify-content-between align-items-center">
                      Messages
                      <a href="#" class="small">Mark all as read</a>
                    </div>
                  </li>
                  <li>
                    <div class="message-notif-scroll scrollbar-outer">
                      <div class="notif-center">
                        <a href="#">
                          <div class="notif-img">
                            <img src="assets/img/jm_denis.jpg" alt="Img Profile" />
                          </div>
                          <div class="notif-content">
                            <span class="subject">Jimmy Denis</span>
                            <span class="block"> How are you ? </span>
                            <span class="time">5 minutes ago</span>
                          </div>
                        </a>
              
            
                      </div>
                    </div>
                  </li>
                  <li>
                    <a class="see-all" href="javascript:void(0);">See all messages<i class="fa fa-angle-right"></i>
                    </a>
                  </li>
                </ul>
              </li>
              <li class="nav-item topbar-icon dropdown hidden-caret">
                <a class="nav-link dropdown-toggle" href="#" id="notifDropdown" role="button" data-bs-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  <i class="bi bi-bell-fill"></i>

                  <span class="notification">4</span>
                </a>
                <ul class="dropdown-menu notif-box animated fadeIn" aria-labelledby="notifDropdown">
                  <li>
                    <div class="dropdown-title">
                      You have 4 new notification
                    </div>
                  </li>
                  <li>
                    <div class="notif-scroll scrollbar-outer">
                      <div class="notif-center">
                 
                        <a href="#">
                          <div class="notif-icon notif-danger">
                            <i class="fa fa-heart"></i>
                          </div>
                          <div class="notif-content">
                            <span class="block"> Farrah liked Admin </span>
                            <span class="time">17 minutes ago</span>
                          </div>
                        </a>
                      </div>
                    </div>
                  </li>
                  <li>
                    <a class="see-all" href="javascript:void(0);">See all notifications<i class="fa fa-angle-right"></i>
                    </a>
                  </li>
                </ul>
              </li>

           <li class="nav-item topbar-user dropdown hidden-caret">
    <a class="dropdown-toggle profile-pic" data-bs-toggle="dropdown" href="#" aria-expanded="false">
        <div class="avatar-sm">
            {% if global_profile and global_profile.picture %}
                <img src="data:image/{{ global_profile.filename }};base64,{{ global_profile.picture }}" 
                     alt="Profile Image" 
                     class="avatar-img rounded-circle" 
                     style="width: 40px; height: 40px; object-fit: cover;" id="navbarProfileImage">
            {% else %}
                <img src="{{ url_for('static', filename='images/1.png') }}" 
                     alt="Default Profile" 
                     class="avatar-img rounded-circle" 
                     style="width: 40px; height: 40px; object-fit: cover;" id="navbarProfileImage">
            {% endif %}
        </div>
        <span class="profile-username">
            <span class="op-7">Hi,</span>
            <span class="fw-bold">{{ user_name }}</span>
        </span>
    </a>
    <ul class="dropdown-menu dropdown-user animated fadeIn">
        <div class="dropdown-user-scroll scrollbar-outer">
            <li>
                <div class="user-box d-flex align-items-center gap-2"> 
                    <div class="avatar-lg mb-2">
                        {% if global_profile and global_profile.picture %}
                        <img src="data:image/{{ global_profile.filename }};base64,{{ global_profile.picture }}" 
                             alt="Profile Image" 
                             class="avatar-img rounded-circle" 
                             style="width: 70px; height: 70px; object-fit: cover;" id="dropdownProfileImage">
                        {% else %}
                        <img src="{{ url_for('static', filename='images/1.png') }}" 
                             alt="Default Profile" 
                             class="avatar-img rounded-circle" 
                             style="width: 70px; height: 70px; object-fit: cover;" id="dropdownProfileImage">
                        {% endif %}
                    </div>
                    <div class="u-text">
                        <h4>{{ user_name }}</h4>
                        <p class="text-muted">{{ email }}</p>
                        <button class="btn btn-xs btn-secondary btn-sm" data-bs-toggle="modal" data-bs-target="#profileModal">
                            View Profile
                        </button>
                    </div>
                </div>
            </li>
            <li>
                <div class="dropdown-divider mt-2"></div>
                <a class="dropdown-item" href="#">My Profile</a>
                <a class="dropdown-item" href="#">My Balance</a>
                <a class="dropdown-item" href="#">Inbox</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="#">Account Setting</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item d-flex align-items-center gap-2" href="
                    {% if user_type == 'labour' %}{{ url_for('labour_logout') }}
                    {% elif user_type == 'site_engineer' %}{{ url_for('site_engineer_logout') }}
                    {% elif user_type == 'admin' %}{{ url_for('admin_logout') }}
                    {% endif %}">
                    <i class="bi bi-box-arrow-right fs-2"></i>
                    <strong class="fs-4">Logout</strong>
                </a>
            </li>
        </div>
    </ul>
</li>

            </ul>
          </div>
        </nav>
        <!-- End Navbar -->
      </div>
 <!-- Single Profile Modal for all user types -->
<div class="modal fade" id="profileModal" tabindex="-1" aria-labelledby="profileModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header border-0 pb-0">
                <h5 class="modal-title" id="profileModalLabel">User Profile</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <!-- Alert placeholder -->
                <div id="profileImageAlert"></div>
                
                <div class="position-relative">
                    <div class="bg-primary bg-gradient rounded-top" style="height: 100px;"></div>
                    <div class="text-center" style="margin-top: -50px;">
                        {% if global_profile and global_profile.picture %}
                            <img src="data:image/{{ global_profile.filename }};base64,{{ global_profile.picture }}" 
                                 class="rounded-circle border border-5 border-white" 
                                 width="100" height="100" id="modalProfileImage">
                        {% else %}
                            <img src="{{ url_for('static', filename='images/1.png') }}" 
                                 class="rounded-circle border border-5 border-white" 
                                 width="100" height="100" id="modalProfileImage">
                        {% endif %}
                        <button class="btn btn-light rounded-circle position-absolute top-100 start-50 translate-middle shadow-sm" 
                                style="width: 40px; height: 40px;" id="editButton">
                            <i class="bi bi-pencil text-primary"></i>
                        </button>
                        <form id="profileImageForm" method="POST" enctype="multipart/form-data" action="
                            {% if user_type == 'labour' %}{{ url_for('labour_update_profile_image') }}
                            {% elif user_type == 'site_engineer' %}{{ url_for('site_engineer_update_profile_image_local') }}
                            {% elif user_type == 'admin' %}{{ url_for('admin_update_profile_image') }}
                            {% endif %}">
                            <input type="file" name="profile_image" id="imageUpload" class="d-none" accept="image/*">
                        </form>
                    </div>
                </div>
                
                <div class="text-center mt-4">
                    <h4>{{ user_name }}</h4>
                    <span class="badge rounded-pill px-3 py-2 mb-2" style="background-color: #7a81a8;">
                        {% if user_type == 'admin' %}Admin
                        {% elif user_type == 'site_engineer' %}Site Engineer
                        {% elif user_type == 'labour' %}Labour
                        {% endif %}
                    </span>
                    <p class="text-muted">{{ email }}</p>
                </div>
                
                <div class="d-flex justify-content-center gap-2 border-top pt-3 mt-3">
                    <button type="button" class="btn btn-outline-secondary rounded-pill px-4" id="resetImageBtn">
                        <i class="bi bi-arrow-counterclockwise me-2"></i>Reset Default
                    </button>
                    <button type="button" class="btn btn-primary rounded-pill px-4" id="saveChangesBtn">
                        <i class="bi bi-save me-2"></i>Save Changes
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
      <!-- Content section -->
      <div class="container">
        {% block breadcrumbs %}
        <!-- Default breadcrumb: can be overridden in child templates -->
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-light d-flex align-items-left align-items-md-center flex-column flex-md-row pt-2 pb-4">
            <li class="breadcrumb-item active" aria-current="page"></li>
          </ol>
        </nav>
        {% endblock %}
        {% block content %}
        {% endblock %}
      </div>

   <footer class="footer" style="margin-top: -10px;">
  <div class="container-fluid d-flex justify-content-between">
    <nav class="pull-left">
      <ul class="nav">
        <li class="nav-item">
          <a class="nav-link" href="#">Qanciye Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Help</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Licenses</a>
        </li>
      </ul>
    </nav>
    <div class="copyright">
      &copy; 2025, made with <i class="bi bi-heart-fill text-danger"></i>
</i> by
      <a href="#">Qanciye Construction And General Services Com</a>
    </div>
    <div>
      Powered by <a target="_blank" href="#">QanciyeTech</a>
    </div>
  </div>
</footer>

    </div>

    <!-- Custom template | don't include it in your project! -->
    <div class="custom-template">
      <div class="title">Settings</div>
      <div class="custom-content">
        <div class="switcher">
          <div class="switch-block">
            <h4>Logo Header</h4>
            <div class="btnSwitch">
              <button type="button" class="selected changeLogoHeaderColor" data-color="dark"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="blue"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="purple"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="light-blue"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="green"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="orange"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="red"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="white"></button>
              <br />
              <button type="button" class="changeLogoHeaderColor" data-color="dark2"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="blue2"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="purple2"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="light-blue2"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="green2"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="orange2"></button>
              <button type="button" class="changeLogoHeaderColor" data-color="red2"></button>
            </div>
          </div>
          <div class="switch-block">
            <h4>Navbar Header</h4>
            <div class="btnSwitch">
              <button type="button" class="changeTopBarColor" data-color="dark"></button>
              <button type="button" class="changeTopBarColor" data-color="blue"></button>
              <button type="button" class="changeTopBarColor" data-color="purple"></button>
              <button type="button" class="changeTopBarColor" data-color="light-blue"></button>
              <button type="button" class="changeTopBarColor" data-color="green"></button>
              <button type="button" class="changeTopBarColor" data-color="orange"></button>
              <button type="button" class="changeTopBarColor" data-color="red"></button>
              <button type="button" class="selected changeTopBarColor" data-color="white"></button>
              <br />
              <button type="button" class="changeTopBarColor" data-color="dark2"></button>
              <button type="button" class="changeTopBarColor" data-color="blue2"></button>
              <button type="button" class="changeTopBarColor" data-color="purple2"></button>
              <button type="button" class="changeTopBarColor" data-color="light-blue2"></button>
              <button type="button" class="changeTopBarColor" data-color="green2"></button>
              <button type="button" class="changeTopBarColor" data-color="orange2"></button>
              <button type="button" class="changeTopBarColor" data-color="red2"></button>
            </div>
          </div>
          <div class="switch-block">
            <h4>Sidebar</h4>
            <div class="btnSwitch">
              <button type="button" class="changeSideBarColor" data-color="white"></button>
              <button type="button" class="selected changeSideBarColor" data-color="dark"></button>
              <button type="button" class="changeSideBarColor" data-color="dark2"></button>
            </div>
          </div>
        </div>
      </div>
      <div class="custom-toggle">
        <i class="bi bi-gear"></i>
      </div>
    </div>
    <!-- End Custom template -->
  </div>
  <!-- Core JS Files -->
  <script src="{{ url_for('static', filename='js/core/jquery-3.7.1.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/core/popper.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/core/bootstrap.min.js') }}"></script>

  <!-- jQuery Scrollbar -->
  <script src="{{ url_for('static', filename='js/plugin/jquery-scrollbar/jquery.scrollbar.min.js') }}"></script>

  <!-- Chart JS -->
  <script src="{{ url_for('static', filename='js/plugin/chart.js/chart.min.js') }}"></script>

  <!-- jQuery Sparkline -->
  <script src="{{ url_for('static', filename='js/plugin/jquery.sparkline/jquery.sparkline.min.js') }}"></script>

  <!-- Chart Circle -->
  <script src="{{ url_for('static', filename='js/plugin/chart-circle/circles.min.js') }}"></script>

  <!-- Datatables -->
  <script src="{{ url_for('static', filename='js/plugin/datatables/datatables.min.js') }}"></script>

  <!-- Bootstrap Notify -->
  <script src="{{ url_for('static', filename='js/plugin/bootstrap-notify/bootstrap-notify.min.js') }}"></script>

  <!-- jQuery Vector Maps -->
  <script src="{{ url_for('static', filename='js/plugin/jsvectormap/jsvectormap.min.js') }}"></script>
  <script src="{{ url_for('static', filename='js/plugin/jsvectormap/world.js') }}"></script>

  <!-- Sweet Alert -->
  <script src="{{ url_for('static', filename='js/plugin/sweetalert/sweetalert.min.js') }}"></script>

  <!-- Kaiadmin JS -->
  <script src="{{ url_for('static', filename='js/kaiadmin.min.js') }}"></script>

  <!-- Kaiadmin DEMO methods, don't include in production -->
  <script src="{{ url_for('static', filename='js/setting-demo.js') }}"></script>
  <script src="{{ url_for('static', filename='js/demo.js') }}"></script>

  <!-- toast alert=================================================================================-->
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    document.getElementById("triggerButton").addEventListener("click", function() {
      // Show sleek toast notification
      const Toast = Swal.mixin({
        toast: true,
        position: 'top',
        showConfirmButton: false,
        timer: 3000,
        timerProgressBar: true,
        width: '380px',
        padding: '16px',
        background: '#fff',
        iconColor: '#27ae60',
        color: '#2c3e50',
        customClass: {
          timerProgressBar: 'swal2-timer-progress-bar-custom'
        },
        didOpen: (toast) => {
          toast.addEventListener('mouseenter', Swal.stopTimer)
          toast.addEventListener('mouseleave', Swal.resumeTimer)
        }
      });
      
      Toast.fire({
        icon: 'success',
        title: `Payment Processed`,
        html: `<div style="margin-top:8px;font-size:15px">Wages successfully registered</div>`
      });
    });
  </script>

  <script>
    $("#lineChart").sparkline([102, 109, 120, 99, 110, 105, 115], {
      type: "line",
      height: "70",
      width: "100%",
      lineWidth: "2",
      lineColor: "#177dff",
      fillColor: "rgba(23, 125, 255, 0.14)",
    });

    $("#lineChart2").sparkline([99, 125, 122, 105, 110, 124, 115], {
      type: "line",
      height: "70",
      width: "100%",
      lineWidth: "2",
      lineColor: "#f3545d",
      fillColor: "rgba(243, 84, 93, .14)",
    });

    $("#lineChart3").sparkline([105, 103, 123, 100, 95, 105, 115], {
      type: "line",
      height: "70",
      width: "100%",
      lineWidth: "2",
      lineColor: "#ffa534",
      fillColor: "rgba(255, 165, 52, .14)",
    });
  </script>
    <!-- jquery -->
    <!-- <script src="https://code.jquery.com/jquery-3.7.1.js"></script> -->
    <!-- DataTable  -->
     <script src="https://cdn.datatables.net/2.1.8/js/dataTables.js"></script>
     <!-- <script src="static/js/SignUp.js"></script> -->
     <script src="{{url_for('static', filename='js/SignUp.js')}}"></script>

     
  <!-- jQuery & DataTables JS -->
<!-- <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> -->
<script src="https://cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script>
    $(document).ready(function() {
        $('#jobTable').DataTable({
            "paging": true,          // Enables pagination
            "lengthMenu": [10, 25, 50, 100], // Show entries selection
            "searching": true,       // Enables search box
            "ordering": true,        // Enables sorting
            "order": [[0, "asc"]],  // Default sorting by ID
            "info": true            // Showing "1 to X of Y entries"
        });
    });
</script>
   <!-- this code addes the labour type -->
   <script>
    function toggleFields() {
        const userType = document.getElementById('user_type').value;

        // Show or hide Labour-specific fields
        const labourFields = document.getElementById('labour_fields');
        if (userType === 'labour') {
            labourFields.style.display = 'block';
        } else {
            labourFields.style.display = 'none';
        }
    }
</script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    var fileInput = document.getElementById('fileInputDropdown');
    if (fileInput) {
        fileInput.addEventListener('change', function() {
            if (this.files && this.files[0]) {
                if (this.files[0].size > 2 * 1024 * 1024) {
                    alert('File size should not exceed 2MB');
                    return;
                }
                var reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('dropdownProfileImage').src = e.target.result;
                    document.getElementById('navbarProfileImage').src = e.target.result;
                }
                reader.readAsDataURL(this.files[0]);
                document.getElementById('profileImageFormDropdown').submit();
            }
        });
    }
});
</script>

<!-- Add this script at the bottom of your base template -->
<script>
document.getElementById('dropdownFileInput').addEventListener('change', function() {
    if (this.files && this.files[0]) {
        // Validate file size (max 2MB)
        if (this.files[0].size > 2 * 1024 * 1024) {
            alert('File size should not exceed 2MB');
            return;
        }
        
        // Submit the form
        document.getElementById('profileImageFormDropdown').submit();
    }
});
</script>

Profile Script 
 <script>

document.addEventListener('DOMContentLoaded', function() {
    const profileImage = document.getElementById('modalProfileImage');
    const navbarProfileImage = document.getElementById('navbarProfileImage');
    const dropdownProfileImage = document.getElementById('dropdownProfileImage');
    const editButton = document.getElementById('editButton');
    const imageUpload = document.getElementById('imageUpload');
    const resetImageBtn = document.getElementById('resetImageBtn');
    const saveChangesBtn = document.getElementById('saveChangesBtn');
    const profileImageForm = document.getElementById('profileImageForm');
    const defaultImageUrl = "{{ url_for('static', filename='images/1.png') }}";
    const alertDiv = document.getElementById('profileImageAlert');

    // When edit button is clicked, trigger file input
    editButton.addEventListener('click', function() {
        imageUpload.click();
    });

    // Handle image selection
    imageUpload.addEventListener('change', function(e) {
        if (e.target.files && e.target.files[0]) {
            const reader = new FileReader();
            reader.onload = function(event) {
                // Update all instances of the profile image
                profileImage.src = event.target.result;
                navbarProfileImage.src = event.target.result;
                if (dropdownProfileImage) {
                    dropdownProfileImage.src = event.target.result;
                }
            };
            reader.readAsDataURL(e.target.files[0]);
        }
    });

    // Reset to default image
    resetImageBtn.addEventListener('click', function() {
        profileImage.src = defaultImageUrl;
        navbarProfileImage.src = defaultImageUrl;
        if (dropdownProfileImage) {
            dropdownProfileImage.src = defaultImageUrl;
        }
        imageUpload.value = '';
    });

    // Save changes (AJAX upload)
    saveChangesBtn.addEventListener('click', function(e) {
        e.preventDefault();
        if (imageUpload.files && imageUpload.files[0]) {
            const formData = new FormData(profileImageForm);
            let url = profileImageForm.getAttribute('action');
            fetch(url, {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                // Show alert
                if (data.success) {
                    alertDiv.innerHTML = `<div class="alert alert-success alert-dismissible fade show" role="alert">
                        ${data.message}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>`;
                } else {
                    alertDiv.innerHTML = `<div class="alert alert-danger alert-dismissible fade show" role="alert">
                        ${data.message}
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                    </div>`;
                }
            })
            .catch(error => {
                alertDiv.innerHTML = `<div class="alert alert-danger alert-dismissible fade show" role="alert">
                    Error uploading image.
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>`;
            });
        } else {
            alertDiv.innerHTML = `<div class="alert alert-warning alert-dismissible fade show" role="alert">
                No changes to save.
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>`;
        }
    });
});
</script> 

</body>

</html>