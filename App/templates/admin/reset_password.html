<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QanciyeApp | Reset Password</title>
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <!-- font Awsome icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
  <!-- boostrap icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
  <!-- MDB -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/8.0.0/mdb.min.css" rel="stylesheet" />
  <!-- Bootsrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- custom css -->
  <link rel="stylesheet" href="/static/css/signin.css">

</head>

<body>

  <!-- Reset Password form start -->
  <section class="signin-page">
    <div class="container-lg">
      <div class="row d-flex justify-content-center align-items-center" style="height: 100vh;">
        <div class="d-flex justify-content-center col-lg-6 col-md-6">
          <form class="bg-light form-style px-5 py-4 pt-5" method="POST" action="{{ url_for('reset_password', token=token) }}"
            style="width: 25rem; max-height: fit-content;">
            <div class="logo-image text-center">
              <img src="{{ url_for('static', filename='images/Qanciye.png') }}" alt="Logo"
                style="width: 100px; height: auto;">
            </div>
            <div class="text-center mb-4">
              <h2 style="color: #213F72;">Reset Password</h2>
            </div>

            {% with messages = get_flashed_messages(with_categories=true) %}
              {% if messages %}
                {% for category, message in messages %}
                  <div class="alert alert-{{ category }} text-center">{{ message }}</div>
                {% endfor %}
              {% endif %}
            {% endwith %}

            <div class="input-group flex-nowrap mb-4">
              <span class="input-group-text" id="password-addon"><i class="bi bi-lock-fill"></i></span>
              <input type="password" class="form-control" id="password" name="password" placeholder="New Password" required>
              <span class="input-group-text" onclick="togglePassword('password')" style="cursor: pointer;">
                <i id="passwordIcon" class="bi bi-eye-fill"></i>
              </span>
            </div>

            <div class="input-group flex-nowrap mb-4">
              <span class="input-group-text" id="confirm-password-addon"><i class="bi bi-lock-fill"></i></span>
              <input type="password" class="form-control" id="confirm_password" name="confirm_password" 
                     placeholder="Confirm New Password" required>
              <span class="input-group-text" onclick="togglePassword('confirm_password')" style="cursor: pointer;">
                <i id="confirmPasswordIcon" class="bi bi-eye-fill"></i>
              </span>
            </div>

            <div class="d-grid">
              <button class="btn btn-primary" type="submit">Reset Password</button>
            </div>

            <div class="text-center mt-3">
              <a href="{{ url_for('login_page') }}">Back to Login</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </section>
  <!-- Reset Password form end -->

  <!-- MDB JAVASCRIPT-->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/8.0.0/mdb.umd.min.js"></script>
  <!-- Bootsrap  -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

  <script>
    function togglePassword(fieldId) {
      const field = document.getElementById(fieldId);
      const icon = document.getElementById(fieldId + 'Icon');
      
      if (field.type === "password") {
        field.type = "text";
        icon.classList.remove('bi-eye-fill');
        icon.classList.add('bi-eye-slash-fill');
      } else {
        field.type = "password";
        icon.classList.remove('bi-eye-slash-fill');
        icon.classList.add('bi-eye-fill');
      }
    }
  </script>

  <script src="{{url_for('static', filename='js/logIn.js')}}"></script>
  <script src="{{url_for('static', filename='js/reset_password.js')}}"></script>
</body>

</html>