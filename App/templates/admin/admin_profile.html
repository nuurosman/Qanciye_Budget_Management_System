<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QanciyeApp | Admin Profile</title>
  <!-- Font Awesome -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" />
  <!-- font Awsome icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
  <!-- boostrap icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet" />
  <!-- MDB -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/8.0.0/mdb.min.css" rel="stylesheet" />
  <!-- Bootsrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <!-- custom css -->
  <link rel="stylesheet" href="/static/css/signin.css">

</head>

<body>

<section class="vh-100" style="background-color: #f4f5f7;">
    <div class="container py-5 h-100">
        <div class="row d-flex justify-content-center align-items-center h-100">
            <div class="col col-lg-6 mb-4 mb-lg-0">
                <div class="card mb-3" style="border-radius: .5rem;">
                    <div class="row g-0">
                        <div class="col-md-4 bg-primary text-center text-white"
                            style="border-top-left-radius: .5rem; border-bottom-left-radius: .5rem;">
                            <form id="profileImageForm" action="{{ url_for('admin_update_profile_image') }}" method="POST" enctype="multipart/form-data">
                                <div class="position-relative">
                                    {% if profile_picture %}
                                    <img src="data:image/jpeg;base64,{{ profile_picture }}" 
                                        alt="Avatar" class="img-fluid my-5 rounded-circle" style="width: 120px; height: 120px; object-fit: cover;" id="profileImage"/>
                                    {% else %}
                                    <img src="{{ url_for('static', filename='images/profile_placeholder.png') }}"
                                        alt="Avatar" class="img-fluid my-5 rounded-circle" style="width: 120px; height: 120px; object-fit: cover;" id="profileImage"/>
                                    {% endif %}
                                    <div class="position-absolute bottom-0 start-50 translate-middle-x mb-3">
                                        <input type="file" name="profile_image" id="fileInput" class="d-none" accept="image/*"/>
                                        <label for="fileInput" class="btn btn-light btn-sm rounded-circle shadow-sm">
                                            <i class="bi bi-camera-fill"></i>
                                        </label>
                                    </div>
                                </div>
                                <h5 class="mt-2">{{ user_name }}</h5>
                                <p class="mb-4">Admin</p>
                            </form>
                            <div class="d-flex justify-content-center fs-4 gap-2  pb-5">
                                <a href="#!"><i class="bi bi-facebook text-white"></i></a>
                                <a href="#!"><i class="bi bi-twitter-x text-white"></i></a>
                                <a href="#!"><i class="bi bi-instagram text-white"></i></a>
                            </div>
                        </div>
                        <div class="col-md-8">
                            <div class="card-body p-4">
                                <h6 class="fw-bold fs-2">ADMIN PROFILE</h6>
                                <hr class="mt-0 mb-4">
                                <div class="row pt-1">
                                    <div class="col-12 mb-3">
                                        <h6>Email</h6>
                                        <p class="text-muted">{{ email }}</p>
                                    </div>
                                    <div class="col-12 mb-3">
                                        <h6>Role</h6>
                                        <p class="text-muted">Administrator</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
document.getElementById('fileInput').addEventListener('change', function() {
    if (this.files && this.files[0]) {
        // Validate file size (max 2MB)
        if (this.files[0].size > 2 * 1024 * 1024) {
            alert('File size should not exceed 2MB');
            return;
        }
        
        // Preview the new image
        var reader = new FileReader();
        reader.onload = function(e) {
            document.getElementById('profileImage').src = e.target.result;
        }
        reader.readAsDataURL(this.files[0]);
        
        // Submit the form
        document.getElementById('profileImageForm').submit();
    }
});
</script>

  <!-- MDB JAVASCRIPT-->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/8.0.0/mdb.umd.min.js"></script>
  <!-- Bootsrap  -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
</body>

</html>